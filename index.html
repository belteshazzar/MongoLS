<!DOCTYPE html>
<html>
<head>
	<title>test</title>
	<link href="css/jquery.terminal-0.9.3.css" rel="stylesheet" />
	<link href="css/mongo-interface-test.css" rel="stylesheet" />
	<script src="js/jquery-1.7.2.min.js"></script>
	<script src="js/jquery.terminal-0.9.3.js"></script>
	<script src="js/unix_formatting.js"></script>
	<script src="js/mongo-interface.js"></script>
	<script src="js/mongo-interface-test.js"></script>
</head>
<body>

	<div id="term_demo"></div>

	<script>
		jQuery(function($, undefined) {

			var term = $('#term_demo').terminal(function(command, term) {

				if (command == "help") {
					db.help();
				} else if (command !== '') {
					try {
						var result = window.eval(command);
						if (result !== undefined) {
							term.echo(JSON.stringify(result));
						}
					} catch (e) {
						term.error(new String(e));
					}
				} else {
					term.echo('');
				}
			}, {
				greetings : 'Javascript Interpreter',
				name : 'js_demo',
				height : 200,
				prompt : 'js> '
			});
			
			db = new MongoInterface.DB({
				print : term.echo,
				storage : MongoInterface.ObjectStore
			});
			
			if (true) {
				testDatabase(db);
				testCollection(db, "localStorage",term.echo);
				testCollection(db, "fred",term.echo);
				testCursor(db, "localStorage");
				testCursor(db, "fred");

				db = new MongoInterface.DB({
					print : term.echo,
					storage : MongoInterface.ObjectStore
				});
			}

			if (db.localStorage.find().count() <= 2) {
				db.localStorage.insert({
					age : 4,
					legs : 0
				});
				db.localStorage.insert([ {
					age : 4,
					legs : 5
				}, {
					age : 54,
					legs : 2
				} ]);
				db.localStorage.insertMany([ {
					age : 54,
					legs : 12
				}, {
					age : 16
				} ]);
				db.localStorage.insertOne({
					name : "steve"
				});
				
			}
		});

		var db = null; // for the terminal
	</script>
</body>
</html>